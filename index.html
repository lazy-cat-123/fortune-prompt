<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fortune Prompt</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #1A1A40;
      color: #EAEAEA;
    }
    h1 {
      color: #FF6AC1;
      text-align: center;
      margin: 2rem 0;
    }
    .form-label {
      color: #FFD700;
    }
    .highlight {
      color: #6BE4FF;
    }
    .card-field {
      border: 1px solid #6BE4FF;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    .floating-label {
      position: relative;
    }
    .floating-label input:focus + label,
    .floating-label input:not(:placeholder-shown) + label {
      top: -0.75rem;
      left: 0.5rem;
      background-color: #1A1A40;
      padding: 0 0.25rem;
      font-size: 0.8rem;
    }
    .floating-label label {
      position: absolute;
      top: 0.75rem;
      left: 0.75rem;
      color: #FFD700;
      pointer-events: none;
      transition: 0.2s ease;
    }
    .floating-label input {
      padding-top: 1.25rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Fortune Prompt</h1>

    <!-- Top Form -->
    <div class="row g-3 align-items-end mb-4">
      <div class="col-md-3">
        <label class="form-label">Type of Fortune*</label>
        <select class="form-select" id="fortuneType">
          <option value="">Select...</option>
          <option>General</option>
          <option>Work</option>
          <option>Study</option>
          <option>Financial</option>
          <option>Love</option>
          <option>Health</option>
        </select>
      </div>
      <div class="col-md-3">
        <label class="form-label">Type of Card*</label>
        <select class="form-select" id="cardType">
          <option value="">Select...</option>
          <option>1 card</option>
          <option>3 cards</option>
          <option>5 cards</option>
        </select>
      </div>
      <div class="col-md-2">
        <button class="btn btn-secondary w-100" onclick="clearTopInputs()">Clear</button>
      </div>
      <div class="col-md-2">
        <button class="btn btn-primary w-100" onclick="confirmTopInputs()">Confirm</button>
      </div>
    </div>

    <!-- Dynamic Card Fields -->
    <div id="cardFields"></div>

    <!-- Confirm Button -->
    <div class="text-center" id="finalConfirmContainer" style="display:none">
      <button class="btn btn-success" onclick="generatePrompt()">Confirm</button>
    </div>

    <!-- Modal for Prompt Result -->
    <div class="modal fade" id="promptModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content bg-dark text-light">
          <div class="modal-header">
            <h5 class="modal-title">Prompt Result</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <textarea id="promptOutput" class="form-control" rows="8" readonly></textarea>
            <div class="mt-2 text-end">
              <button class="btn btn-outline-info btn-sm" onclick="copyPrompt()">Copy to Clipboard</button>
              <span id="copyStatus" class="ms-2 text-success" style="display:none;">Copied!</span>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const cardFields = document.getElementById("cardFields");

    function clearTopInputs() {
      document.getElementById("fortuneType").value = "";
      document.getElementById("cardType").value = "";
      cardFields.innerHTML = "";
      document.getElementById("finalConfirmContainer").style.display = "none";
    }

    function confirmTopInputs() {
      const cardCountMap = {
        "1 card": 1,
        "3 cards": 3,
        "5 cards": 5
      };
      const type = document.getElementById("cardType").value;
      const count = cardCountMap[type] || 0;
      cardFields.innerHTML = "";

      for (let i = 1; i <= count; i++) {
        cardFields.innerHTML += `
        <div class="card-field">
          <label class="form-label">Card ${i}</label>
          <div class="row g-2">
            <div class="col-md-4">
              <select class="form-select card-major" placeholder="Major Card">
                <option value="">-- Major Card --</option>
                <option>The Fool</option>
                <option>The Magician</option>
                <option>The High Priestess</option>
                <option>The Empress</option>
                <option>The Emperor</option>
                <option>The Hierophant</option>
                <option>The Lovers</option>
                <option>The Chariot</option>
                <option>Strength</option>
                <option>The Hermit</option>
                <option>Wheel of Fortune</option>
                <option>Justice</option>
                <option>The Hanged Man</option>
                <option>Death</option>
                <option>Temperance</option>
                <option>The Devil</option>
                <option>The Tower</option>
                <option>The Star</option>
                <option>The Moon</option>
                <option>The Sun</option>
                <option>Judgement</option>
                <option>The World</option>
              </select>
            </div>
            <div class="col-md-4">
              <div class="input-group">
                <select class="form-select minor-suit">
                  <option value="">Suit</option>
                  <option>Sword</option>
                  <option>Wand</option>
                  <option>Pentacle</option>
                  <option>Cup</option>
                </select>
                <select class="form-select minor-value">
                  <option value="">Value</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
                  <option>6</option>
                  <option>7</option>
                  <option>8</option>
                  <option>9</option>
                  <option>10</option>
                  <option>Knight</option>
                  <option>Queen</option>
                  <option>King</option>
                  <option>Ace</option>
                </select>
              </div>
            </div>
            <div class="col-md-3">
              <select class="form-select card-status">
                <option>Straight</option>
                <option>Reverse</option>
              </select>
            </div>
            <div class="col-md-1">
              <button class="btn btn-outline-danger w-100" onclick="this.closest('.card-field').remove()">Ã—</button>
            </div>
          </div>
        </div>`;
      }
      document.getElementById("finalConfirmContainer").style.display = "block";
    }

    function generatePrompt() {
      const fortuneType = document.getElementById("fortuneType").value;
      const cards = document.querySelectorAll(".card-field");
      const results = [];
      cards.forEach((card, index) => {
        const major = card.querySelector(".card-major").value;
        const suit = card.querySelector(".minor-suit").value;
        const val = card.querySelector(".minor-value").value;
        const status = card.querySelector(".card-status").value;
        const name = major || `${val} of ${suit}`;
        results.push(`${name} (${status})`);
      });
      const output = `Fortune Type: ${fortuneType}\nCards: ${results.join(", ")}`;
      document.getElementById("promptOutput").value = output;
      const modal = new bootstrap.Modal(document.getElementById('promptModal'));
      modal.show();
    }

    function copyPrompt() {
      const text = document.getElementById("promptOutput").value;
      navigator.clipboard.writeText(text).then(() => {
        document.getElementById("copyStatus").style.display = "inline";
        setTimeout(() => document.getElementById("copyStatus").style.display = "none", 2000);
      });
    }
  </script>
</body>
</html>
